- name: Install requirements
  local_action: command ansible-galaxy install -r '{{ role_path }}/requirements.yml'
  become: no
- name: Enable unattended upgrades
  include_role:
    name: jnv.unattended-upgrades
- name: Set time zone
  when: timezone
  community.general.timezone:
    name: '{{ timezone }}'
- name: Set up hostname
  copy:
    content: localhost
    dest: /etc/hostname
  register: hostname
- name: Restart network
  service:
    name: networking
    state: restarted
  when: hostname.changed
- name: Set up watchdog
  when: watchdog
  include_role:
    name: reitermarkus.raspberry_pi.watchdog
- name: Set up peripherals
  include_role:
    name: reitermarkus.raspberry_pi.peripherals
